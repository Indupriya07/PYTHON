<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interior Design Website</title>
    <link rel="style.css" href="style.css">
</head>
<body ng-controller="AuthController">

    <div class="container">
        <header>
            <h1>Welcome to Interior Design Hub</h1>
        </header>

        <nav>
            <ul>
                <a href="#" ng-click="logout()" ng-show="isLoggedIn">Logout</a>
            </ul>
        </nav>

        <div class="auth-section">
            
            <!-- ðŸ”¹ LOGIN FORM -->
            <div class="login-box" ng-show="!isOTP && !isSignUp">
                <h2>Login</h2>
                <input type="text" ng-model="user.username" placeholder="Username">
                <input type="password" ng-model="user.password" placeholder="Password">
                <button ng-click="login()">Login</button>
                <p>Don't have an account? <a href="#" ng-click="showSignup()">Sign Up</a></p>
            </div>

            <!-- ðŸ”¹ SIGN-UP FORM -->
            <div class="signup-box" ng-show="isSignUp && !isOTP">
                <h2>Sign Up</h2>
                <input type="text" ng-model="newUser.username" placeholder="Username">
                <input type="password" ng-model="newUser.password" placeholder="Password">
                <button ng-click="signup()">Sign Up</button>
                <p>Already have an account? <a href="#" ng-click="showLogin()">Login</a></p>
            </div>

            <!-- ðŸ”¹ OTP VERIFICATION FORM -->
            <div class="otp-box" ng-show="isOTP">
                <h2>Verify OTP</h2>
                <p>Please enter the OTP sent to <strong>{{ newUser.username }}@gmail.com</strong></p>
                <input type="text" ng-model="otp" placeholder="Enter OTP" maxlength="6">

                <div class="button-group">
                    <button class="back-btn" ng-click="backToSignup()">Back</button>
                    <button class="verify-btn" ng-click="verifyOTP()">Verify</button>
                </div>

                <p class="resend-text">Resend OTP in <span ng-show="countdown > 0">{{ countdown }}s</span></p>
            </div>

        </div>
    </div>

    <script>
        var app = angular.module('AuthApp', []);
        app.controller('AuthController', function($scope, $interval) {
            $scope.isLoggedIn = false;
            $scope.isSignUp = false; // Controls signup form visibility
            $scope.isOTP = false; // Controls OTP verification form visibility
            $scope.otp = "";
            $scope.countdown = 60;

            // LOGIN FUNCTION
            $scope.login = function () {
                if ($scope.user.username && $scope.user.password) {
                    alert("Login Successful!");
                    $scope.isLoggedIn = true;
                } else {
                    alert("Please enter valid credentials.");
                }
            };

            // SIGN-UP FUNCTION (Moves to OTP Verification)
            $scope.signup = function () {
                if ($scope.newUser.username && $scope.newUser.password) {
                    $scope.isOTP = true;  // Show OTP form
                    $scope.isSignUp = false; // Hide Sign-Up form
                    startCountdown();
                } else {
                    alert("Please enter valid details.");
                }
            };

            // OTP VERIFICATION FUNCTION
            $scope.verifyOTP = function () {
                if ($scope.otp.length === 6) {
                    alert("OTP Verified Successfully! Account Created.");
                    $scope.isOTP = false;
                    $scope.isSignUp = false;
                } else {
                    alert("Invalid OTP! Please enter a 6-digit OTP.");
                }
            };

            // SHOW SIGN-UP FORM
            $scope.showSignup = function () {
                $scope.isSignUp = true;
                $scope.isOTP = false;
            };

            // SHOW LOGIN FORM
            $scope.showLogin = function () {
                $scope.isSignUp = false;
                $scope.isOTP = false;
            };

            // BACK TO SIGN-UP FUNCTION
            $scope.backToSignup = function () {
                $scope.isOTP = false; // Show Sign-Up form again
                $scope.isSignUp = true;
                $scope.otp = ""; // Clear OTP input
            };

            // START COUNTDOWN TIMER
            function startCountdown() {
                $scope.countdown = 60;
                var timer = $interval(function () {
                    if ($scope.countdown > 0) {
                        $scope.countdown--;
                    } else {
                        $interval.cancel(timer);
                    }
                }, 1000);
            }
        });
    </script>

</body>
</html>
